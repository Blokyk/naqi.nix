{ config, lib, pkgs, ... }:

{
  networking.hosts = {
    "77.90.19.122" = [ "zoeee.net" ];
  };

  services.bind = {
    enable = true;
    zones = {
      "zoeee.net" = {
        master = true;
        file = pkgs.writeText "zone-zoeee.net" ''
          $ORIGIN zoeee.net.
          $TTL	1s
          @	IN	SOA	ns1 hostmaster (
          			1	; Serial number
          			1s	; Refresh TTL
          			1s	; Retry TTL
          			1s	; Expire TTL
          			1s)	; Negative cache TTL
            	IN	NS	ns1
          
          ns1	IN	A	77.90.19.122
          	IN	AAAA	2a0d:5940:112:2a::a
          
          @	IN	A	77.90.19.122
          	IN	AAAA	2a0d:5940:112:2a::a
          
          ; these are actually all just aliases to this very machine
          www	IN	CNAME	zoeee.net.
          img	IN	CNAME	zoeee.net.
          manga	IN	CNAME	zoeee.net.
        '';
      };
    };
  };  
}
